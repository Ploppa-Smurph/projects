{% extends 'base.html' %}

{% block title %}Daily Error Reports{% endblock %}

{% block head %}
<!-- Load styles from static/css/styles.css -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
{% endblock %}

{% block content %}
<div class="container my-4">
  <h1>Daily Error Reports</h1>
  {% if grouped_reports %}
  {% for day, reports in grouped_reports.items() %}
  <div class="report-day my-3">
    <h3>
      {{ day.strftime('%B %d, %Y') }} ({{ reports|length }} reports)
    </h3>
    <div class="thumbnails d-flex flex-wrap">
      {% for report in reports %}
      <div class="thumb-container m-2">
        <img class="thumbnail"
          src="{{ report.thumbnail }}"
          data-full="{{ url_for('drive.drive_image', file_id=report.file_id) }}"
          alt="{{ report.title }}"
          style="width:200px; height:auto;"
          loading="lazy">


        <p class="image-time mt-2">{{ report.date.strftime('%H:%M:%S') }}</p> <!-- Display time -->
      </div>
      {% endfor %}
    </div>
  </div>
  {% endfor %}
  {% else %}
  <p>No reports available.</p>
  {% endif %}
</div>

<!-- Modal to display the full-size image -->
<div id="imageModal" class="modal" style="display:none;">
  <span id="closeModal" class="close-btn">&times;</span>
  <img id="modalImage" class="modal-content" src="" alt="Full Size Image"
    onerror="console.error('Failed to load image:', this.src);">
</div>
{% endblock %}

{% block scripts %}
<!-- Load scripts from static/scripts/script.js with defer to ensure the DOM is loaded first -->
<script src="{{ url_for('static', filename='scripts/script.js') }}" defer></script>
{% endblock %}